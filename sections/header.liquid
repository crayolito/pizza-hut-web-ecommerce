<!-- Header Component -->
<sticky-header>
  <header class="encabezado">
    <!-- Logo Section -->
    <div class="contenedor-logo">
      <img
        src="{{ 'logo-pizza-hut.png' | asset_url }}"
        alt="Logo Pizza Hut"
        class="logo"
      >
    </div>

    <!-- Navigation Menu -->
    <nav class="menu-navegacion">
      <div class="menu-item">
        <a href="/menu">
          <h4>Menú</h4>
        </a>
      </div>
      <div class="menu-item menu-hutcoins">
        <a class="link-hutcoins" href="/promociones">
          <h4>Hut Coins</h4>
          {% render 'icon-flecha-hutcoins' %}
        </a>
      </div>
      <div class="menu-item">
        <a href="/restaurantes">
          <h4>Sobre Nosotros</h4>
        </a>
      </div>
    </nav>

    <!-- Options Container -->
    <div class="contenedor-opciones">
      <!-- Search Bar -->
      <div class="contenedor-buscador">
        {% render 'icon-search', class: 'icono-buscar' %}
        <input type="search" class="campo-busqueda" placeholder="Buscar...">
      </div>

      <!-- Shopping Cart -->
      <div class="contenedor-carrito">
        {% render 'icon-carrito' %}
      </div>

      <!-- Delivery Mode -->
      <div class="modo-entrega">
        <p class="texto-entrega-titulo">Selecciona tu</p>
        <div class="contenedor-metodo">
          <h4 class="texto-metodo">Método de entrega</h4>
          {% render 'icon-domicilio', class: 'icono-domicilio' %}
        </div>
      </div>

      <!-- Login Button -->
      <button class="boton-login">
        <h4 class="texto-login">Iniciar sesión</h4>
        {% render 'icon-search', class: 'icono-login' %}
      </button>
    </div>
  </header>
</sticky-header>

<!-- Custom Element Definition -->
<script>
  class HeaderPrincipal extends HTMLElement {}
  customElements.define('sticky-header', HeaderPrincipal);
</script>

<style>
  /* Variables principales con rangos más precisos */
  :root {
    --fuente-principal: 'League Gothic', sans-serif;
    --fuente-secundaria: 'Montserrat', sans-serif;
    --color-primario: #231f20;
    --color-borde: #dedede;
    --color-borde-oscuro: #969696;
    --color-rojo: #c8102e;

    /* Rangos de tamaño basados en los 90px originales */
    --header-height: max(70px, min(90px, 8vh));
    --logo-height: max(30px, min(37px, calc(var(--header-height) * 0.41)));

    /* Espaciados proporcionales */
    --spacing-xs: max(4px, min(8px, 0.5vw));
    --spacing-sm: max(8px, min(16px, 1vw));
    --spacing-md: max(16px, min(27px, 2vw));
    --spacing-lg: max(27px, min(53px, 4vw));
  }

  /* Reset mejorado */
  *,
  *::before,
  *::after {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  /* Sistema de tipografía flexible */
  h4 {
    font-family: var(--fuente-principal);
    font-size: max(1.25rem, min(1.5rem, calc(var(--header-height) * 0.2)));
    line-height: 1.125;
    letter-spacing: -0.03em;
    text-transform: uppercase;
    white-space: nowrap;
  }

  p {
    font-family: var(--fuente-secundaria);
    font-size: max(0.875rem, min(1rem, calc(var(--header-height) * 0.15)));
    line-height: 1.5;
    white-space: nowrap;
  }

  /* Header principal con flexibilidad controlada */
  .encabezado {
    width: 100%;
    height: var(--header-height);
    padding: 0 var(--spacing-lg);
    background-color: #fff;
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: var(--spacing-md);
    min-height: 70px; /* Altura mínima absoluta */
    position: relative;
  }

  /* Logo con proporción fija */
  .contenedor-logo {
    height: var(--logo-height);
    aspect-ratio: 136/37;
    flex-shrink: 0;
    display: flex;
    align-items: center;
  }

  .logo {
    width: 100%;
    height: 100%;
    object-fit: contain;
  }

  /* Navegación con distribución flexible */
  .menu-navegacion {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    flex: 1;
    justify-content: center;
    padding: 0 var(--spacing-md);
    min-width: min-content;
  }

  .menu-item {
    flex-shrink: 0;
  }

  .link-hutcoins {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
  }

  /* Contenedor de opciones con mejor control de espacio */
  .contenedor-opciones {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    flex-shrink: 0;
  }

  /* Buscador con tamaño mínimo garantizado */
  .contenedor-buscador {
    width: max(150px, min(177px, 15vw));
    height: max(36px, min(43px, calc(var(--header-height) * 0.48)));
    border: 1.5px solid #6e6e6e;
    border-radius: 4px;
    display: flex;
    align-items: center;
    padding: var(--spacing-sm);
    gap: var(--spacing-xs);
    flex-shrink: 1;
    min-width: 120px;
  }

  .campo-busqueda {
    font-family: var(--fuente-secundaria);
    font-size: max(0.875rem, min(1rem, calc(var(--header-height) * 0.15)));
    width: 100%;
    background: transparent;
    border: none;
    outline: none;
  }

  /* Carrito con bordes consistentes */
  .contenedor-carrito {
    height: max(32px, min(36px, calc(var(--header-height) * 0.4)));
    padding: 0 var(--spacing-md);
    border-left: 1.5px solid var(--color-borde);
    border-right: 1.5px solid var(--color-borde);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }

  /* Modo de entrega con mejor alineación */
  .modo-entrega {
    height: max(32px, min(36px, calc(var(--header-height) * 0.4)));
    padding-right: var(--spacing-md);
    border-right: 1.5px solid var(--color-borde);
    display: flex;
    flex-direction: column;
    justify-content: center;
    flex-shrink: 0;
  }

  .texto-entrega-titulo {
    text-transform: uppercase;
    font-weight: 600;
    margin-bottom: calc(var(--spacing-xs) * 0.5);
  }

  .contenedor-metodo {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
  }

  /* Botón de login con tamaño consistente */
  .boton-login {
    height: max(32px, min(36px, calc(var(--header-height) * 0.4)));
    padding: 0 var(--spacing-sm);
    background: var(--color-rojo);
    border: none;
    border-radius: 4px;
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    cursor: pointer;
    flex-shrink: 0;
  }

  .texto-login {
    color: #fff;
  }

  /* Prevención de desbordamiento */
  @media screen and (max-width: 1200px) {
    :root {
      --header-height: max(70px, min(80px, 7vh));
    }

    .texto-entrega-titulo {
      font-size: max(0.75rem, min(0.875rem, calc(var(--header-height) * 0.13)));
    }
  }

  @media screen and (max-width: 1024px) {
    .contenedor-opciones {
      gap: var(--spacing-sm);
    }

    .contenedor-buscador {
      min-width: 100px;
    }

    :root {
      --spacing-md: max(12px, min(20px, 1.5vw));
    }
  }

  /* Manejo de overflow */
  @supports (-webkit-hyphens: none) {
    .encabezado {
      overflow: visible; /* Previene corte en Safari */
    }
  }
</style>
